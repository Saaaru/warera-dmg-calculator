<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fight Skills Layout</title>
  <link rel="stylesheet" href="public/styles/style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>
  <div id="loading-overlay">
    <div class="loading-spinner"></div>
    <p>Loading Game Data...</p>
  </div>
  <header class="main-header">
    <h1>War Era Damage Calculator!</h1>
    <div class="how-to-use">
      <h2>How to Use</h2>
      <div class="how-to-use-grid">
        <div class="how-to-use-item">
          <div class="step-title">Set Your Level</div>
          <div class="step-description">Use the +/- buttons to set your character's level and get skill points.</div>
        </div>
        <div class="how-to-use-item">
          <div class="step-title">Assign Skills</div>
          <div class="step-description">Spend your skill points on the left panel to improve your abilities.</div>
        </div>
        <div class="how-to-use-item">
          <div class="step-title">Equip Items</div>
          <div class="step-description">Click items from the inventory to configure and equip them.</div>
        </div>
        <div class="how-to-use-item">
          <div class="step-title">Load Game Data</div>
          <div class="step-description">Use your Player ID to fetch your skills directly from the game.</div>
        </div>
        <div class="how-to-use-item">
          <div class="step-title">Simulate Combat</div>
          <div class="step-description">Test your build's performance with simulation buttons.</div>
        </div>
        <div class="how-to-use-item">
          <div class="step-title">Save & Load Builds</div>
          <div class="step-description">Use presets to save and load your favorite character builds.</div>
        </div>
      </div>
    </div>
  </header>

  <div class="container hidden">
    <!-- COLUMNA 1: SKILLS -->
    <div class="skills-section">
      <div class="skills-title">Fight skills</div>
      <div class="skill" data-skill="attack"><div class="skill-header"><div class="skill-info"><span class="skill-icon">ğŸ—¡ï¸</span><span class="skill-name">Attack</span><span class="skill-value" id="value-attack"></span></div><div class="skill-buttons"><button class="skill-btn btn-minus" data-skill="attack" data-action="minus"> âˆ’ </button><button class="skill-btn btn-plus" data-skill="attack" data-action="plus"> + </button></div></div><div class="skill-description"> It is the base value for damages calculation. </div><div class="progress-bar" id="progress-attack"><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div></div></div>
      <div class="skill" data-skill="precision"><div class="skill-header"><div class="skill-info"><span class="skill-icon">ğŸ¯</span><span class="skill-name">Precision</span><span class="skill-value" id="value-precision"></span></div><div class="skill-buttons"><button class="skill-btn btn-minus" data-skill="precision" data-action="minus"> âˆ’ </button><button class="skill-btn btn-plus" data-skill="precision" data-action="plus"> + </button></div></div><div class="skill-description">Chance to hit the target.</div><div class="progress-bar" id="progress-precision"><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div></div></div>
      <div class="skill" data-skill="criticalChance"><div class="skill-header"><div class="skill-info"><span class="skill-icon">ğŸ’¥</span><span class="skill-name">Crit. chance</span><span class="skill-value" id="value-criticalChance"></span></div><div class="skill-buttons"><button class="skill-btn btn-minus" data-skill="criticalChance" data-action="minus"> âˆ’ </button><button class="skill-btn btn-plus" data-skill="criticalChance" data-action="plus"> + </button></div></div><div class="skill-description">Chance of landing a critical hit.</div><div class="progress-bar" id="progress-criticalChance"><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div></div></div>
      <div class="skill" data-skill="criticalDamages"><div class="skill-header"><div class="skill-info"><span class="skill-icon">ğŸ”¥</span><span class="skill-name">Crit. damages</span><span class="skill-value" id="value-criticalDamages"></span></div><div class="skill-buttons"><button class="skill-btn btn-minus" data-skill="criticalDamages" data-action="minus"> âˆ’ </button><button class="skill-btn btn-plus" data-skill="criticalDamages" data-action="plus"> + </button></div></div><div class="skill-description"> Increases the damage of critical hits. </div><div class="progress-bar" id="progress-criticalDamages"><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div></div></div>
      <div class="skill" data-skill="armor"><div class="skill-header"><div class="skill-info"><span class="skill-icon">ğŸ›¡ï¸</span><span class="skill-name">Armor</span><span class="skill-value" id="value-armor"></span></div><div class="skill-buttons"><button class="skill-btn btn-minus" data-skill="armor" data-action="minus"> âˆ’ </button><button class="skill-btn btn-plus" data-skill="armor" data-action="plus"> + </button></div></div><div class="skill-description"> Chance of reducing incoming damage. </div><div class="progress-bar" id="progress-armor"><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div></div></div>
      <div class="skill" data-skill="dodge"><div class="skill-header"><div class="skill-info"><span class="skill-icon">ğŸŒ€</span><span class="skill-name">Dodge</span><span class="skill-value" id="value-dodge"></span></div><div class="skill-buttons"><button class="skill-btn btn-minus" data-skill="dodge" data-action="minus"> âˆ’ </button><button class="skill-btn btn-plus" data-skill="dodge" data-action="plus"> + </button></div></div><div class="skill-description"> Dodging incoming damages. Prevents equipment durability from being consumed. </div><div class="progress-bar" id="progress-dodge"><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div></div></div>
      <div class="skill" data-skill="health"><div class="skill-header"><div class="skill-info"><span class="skill-icon">â¤ï¸</span><span class="skill-name">Health</span><span class="skill-value" id="value-health"></span></div><div class="skill-buttons"><button class="skill-btn btn-minus" data-skill="health" data-action="minus"> âˆ’ </button><button class="skill-btn btn-plus" data-skill="health" data-action="plus"> + </button></div></div><div class="skill-description">Consumed when hitting in battles.</div><div class="progress-bar" id="progress-health"><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div></div></div>
      <div class="skill" data-skill="lootChance"><div class="skill-header"><div class="skill-info"><span class="skill-icon">ğŸ“¦</span><span class="skill-name">Loot chance</span><span class="skill-value" id="value-lootChance"></span></div><div class="skill-buttons"><button class="skill-btn btn-minus" data-skill="lootChance" data-action="minus"> âˆ’ </button><button class="skill-btn btn-plus" data-skill="lootChance" data-action="plus"> + </button></div></div><div class="skill-description"> Chance to loot weapon or equipment after a battle. </div><div class="progress-bar" id="progress-lootChance"><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div></div></div>
      <div class="skill" data-skill="hunger"><div class="skill-header"><div class="skill-info"><span class="skill-icon">ğŸ—</span><span class="skill-name">Hunger</span><span class="skill-value" id="value-hunger"></span></div><div class="skill-buttons"><button class="skill-btn btn-minus" data-skill="hunger" data-action="minus"> âˆ’ </button><button class="skill-btn btn-plus" data-skill="hunger" data-action="plus"> + </button></div></div><div class="skill-description">Limit of food consumption.</div><div class="progress-bar" id="progress-hunger"><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div><div class="progress-block"></div></div></div>
    </div>

    <!-- COLUMNA 2: CENTRO -->
    <div class="center-column">
      <div class="character-section">
        <div id="api-load-section" class="config-panel">
          <h4>Load from Game</h4>
          <div class="api-load-form">
              <input type="text" id="player-name-api-input" placeholder="Enter your Player ID or Profile URL">
              <button id="load-from-api-btn" class="action-btn">ğŸ”— Fetch Data</button>
          </div>
      </div>
        <div class="character-header">
          <div class="player-info">
            <div class="avatar-container"><img src="public/images/items/avatar.png" alt="Player Avatar" class="avatar"><div class="level-badge" id="char-level-badge"></div></div>
            <div class="character-stats">
              <div class="stat-item stat-orange" data-stat-code="attack">ğŸ—¡ï¸ <span id="char-stat-attack"></span></div>
              <div class="stat-item stat-orange" data-stat-code="precision">ğŸ¯ <span id="char-stat-precision"></span></div>
              <div class="stat-item stat-red" data-stat-code="criticalChance">ğŸ’¥ <span id="char-stat-criticalChance"></span></div>
              <div class="stat-item stat-red" data-stat-code="criticalDamages">ğŸ”¥ <span id="char-stat-criticalDamages"></span></div>
              <div class="stat-item stat-blue" data-stat-code="armor">ğŸ›¡ï¸ <span id="char-stat-armor"></span></div>
              <div class="stat-item stat-blue" data-stat-code="dodge">ğŸŒ€ <span id="char-stat-dodge"></span></div>
              <div class="stat-item stat-green" data-stat-code="lootChance">ğŸ“¦ <span id="char-stat-lootChance"></span></div>
            </div>
          </div>
          <div class="character-actions">
            <button class="action-btn reset-btn" id="reset-btn">ğŸ”„ Reset</button>
            <button class="action-btn" id="export-btn">ğŸ“¤ Export Build</button>
          </div>
        </div>
        <div class="player-status-section">
          <div class="level-points-display">
            <div class="stat-label">Level: <span id="player-level-display"></span></div>
            <div class="level-buttons"><button class="level-btn btn-minus" id="level-minus-btn">âˆ’</button><button class="level-btn btn-plus" id="level-plus-btn">+</button></div>
            <div class="stat-label">Skill Points: <span id="skill-points-available"></span>/<span id="skill-points-total"></span></div>
          </div>
          <div class="buff-selection">
            <div class="ammo-buffs"><button class="buff-btn tier-green" data-buff-code="lightAmmo" title="Light Ammo (+10% Attack)">L</button><button class="buff-btn tier-blue" data-buff-code="ammo" title="Standard Ammo (+20% Attack)">M</button><button class="buff-btn tier-purple" data-buff-code="heavyAmmo" title="Heavy Ammo (+40% Attack)">H</button></div>
            <div class="consumable-buffs"><button class="buff-btn tier-red" data-buff-code="cocain" title="Pill (+80% Attack)">ğŸ’Š</button></div>
          </div>
          <div class="resource-bars">
            <button class="action-btn" id="full-restore-btn">âœ¨ Full Restore</button>
            <div class="resource-item"><span>â¤ï¸</span><div class="bar-container" id="health-bar-container"><div class="bar-fill" id="health-bar-fill"></div><span class="bar-text" id="health-bar-display"></span></div></div>
            <div class="resource-item"><span>ğŸ—</span><div class="bar-container" id="hunger-bar-container"><div class="bar-fill" id="hunger-bar-fill"></div><span class="bar-text" id="hunger-bar-display"></span></div></div>
          </div>
        </div>
        <div class="equipment-section">
          <div class="equipment-labels"><span>Weapon</span><span>Ammo</span><span>Helmet</span><span>Chest</span><span>Pants</span><span>Boots</span><span>Gloves</span></div>
          <div class="equipment-slots">
            <div class="equipment-slot" data-slot="weapon">+</div><div class="equipment-slot" data-slot="ammo">+</div><div class="equipment-slot" data-slot="helmet">+</div><div class="equipment-slot" data-slot="chest">+</div><div class="equipment-slot" data-slot="pants">+</div><div class="equipment-slot" data-slot="boots">+</div><div class="equipment-slot" data-slot="gloves">+</div>
          </div>
        </div>
      </div>
      <div class="config-and-simulation-section">
        <div id="item-config-panel" class="config-panel hidden">
          <h4>Item Configuration</h4>
          <div class="item-details"><div id="config-item-icon-container" class="inventory-item"><img id="config-item-icon" src="" alt="Selected Item Icon"></div><span id="config-item-name">Item Name</span></div>
          <div id="item-stats-config" class="item-stats-config"><p>Select an item from the inventory to configure it.</p></div>
          <button id="equip-item-btn" class="action-btn">Equip Item</button>
        </div>
        <div id="presets-section" class="config-panel">  
          <h4>Build Presets</h4>
          <div class="preset-save-form">
            <input type="text" id="preset-name-input" placeholder="Preset Name">
            <button id="save-preset-btn" class="action-btn">ğŸ’¾ Save Current Build</button>
          </div>
          <div id="presets-list-container">
            <p>No presets saved yet.</p>
          </div>
        </div>
        <div id="simulation-panel" class="simulation-panel">
          <button id="simulate-btn" class="action-btn">Simulate Damage</button>
          <button id="simulate-full-btn" class="action-btn">Simulate Full Combat</button>
          <h4>Damage Simulation</h4>
          <div id="simulation-log" class="simulation-log"> Simulation results will appear here. </div>
        </div>
        
      </div>
    </div>

    <!-- COLUMNA 3: INVENTARIO -->
    <div class="inventory-section">
      <div class="inventory-title">Inventory</div>
      <div class="inventory-grid">
        <!-- consumibles -->
        <div class="inventory-item tier-green" data-code="bread"><img src="public/images/items/bread.png" alt="Bread" /></div>
        <div class="inventory-item tier-blue" data-code="steak"><img src="public/images/items/steak.png" alt="Steak" /></div>
        <div class="inventory-item tier-purple" data-code="cookedFish"><img src="public/images/items/cookedFish.png" alt="Cooked Fish" /></div>
        <!-- equipamiento -->
         <!-- tier-gray -->
        <div class="inventory-item tier-gray" data-code="pants1"><img src="public/images/items/pants1.png" alt="Gray Pants" /></div>
        <div class="inventory-item tier-gray" data-code="gloves1"><img src="public/images/items/gloves1.png" alt="Gray Gloves" /></div>
        <div class="inventory-item tier-gray" data-code="boots1"><img src="public/images/items/boots1.png" alt="Gray Boots" /></div>
        <div class="inventory-item tier-gray" data-code="chest1"><img src="public/images/items/chest1.png" alt="Gray Chest" /></div>
        <div class="inventory-item tier-gray" data-code="helmet1"><img src="public/images/items/helmet1.png" alt="Gray Helmet" /></div>
        <div class="inventory-item tier-gray" data-code="knife"><img src="public/images/items/knife.png" alt="Gray Knife" /></div>
        <!-- tier-green -->
        <div class="inventory-item tier-green" data-code="pants2"><img src="public/images/items/pants1.png" alt="Green Pants" /></div>
        <div class="inventory-item tier-green" data-code="gloves2"><img src="public/images/items/gloves1.png" alt="Green Gloves" /></div>
        <div class="inventory-item tier-green" data-code="boots2"><img src="public/images/items/boots1.png" alt="Green Boots" /></div>
        <div class="inventory-item tier-green" data-code="chest2"><img src="public/images/items/chest1.png" alt="Green Chest" /></div>
        <div class="inventory-item tier-green" data-code="helmet2"><img src="public/images/items/helmet1.png" alt="Green Helmet" /></div>
        <div class="inventory-item tier-green" data-code="gun"><img src="public/images/items/gun.png" alt="Green Gun" /></div>
        <!-- tier-blue -->
        <div class="inventory-item tier-blue" data-code="pants3"><img src="public/images/items/pants1.png" alt="Blue Pants" /></div>
        <div class="inventory-item tier-blue" data-code="gloves3"><img src="public/images/items/gloves1.png" alt="Blue Gloves" /></div>
        <div class="inventory-item tier-blue" data-code="boots3"><img src="public/images/items/boots1.png" alt="Blue Boots" /></div>
        <div class="inventory-item tier-blue" data-code="chest3"><img src="public/images/items/chest1.png" alt="Blue Chest" /></div>
        <div class="inventory-item tier-blue" data-code="helmet3"><img src="public/images/items/helmet1.png" alt="Blue Helmet" /></div>
        <div class="inventory-item tier-blue" data-code="rifle"><img src="public/images/items/rifle.png" alt="Blue Rifle" /></div>
        <!-- tier-purple -->
        <div class="inventory-item tier-purple" data-code="pants4"><img src="public/images/items/pants1.png" alt="Purple Pants" /></div>
        <div class="inventory-item tier-purple" data-code="gloves4"><img src="public/images/items/gloves1.png" alt="Purple Gloves" /></div>
        <div class="inventory-item tier-purple" data-code="boots4"><img src="public/images/items/boots1.png" alt="Purple Boots" /></div>
        <div class="inventory-item tier-purple" data-code="chest4"><img src="public/images/items/chest1.png" alt="Purple Chest" /></div>
        <div class="inventory-item tier-purple" data-code="helmet4"><img src="public/images/items/helmet1.png" alt="Purple Helmet" /></div>
        <div class="inventory-item tier-purple" data-code="sniper"><img src="public/images/items/sniper.png" alt="Purple Sniper" /></div>
        <!-- tier-orange -->
        <div class="inventory-item tier-orange" data-code="pants5"><img src="public/images/items/pants1.png" alt="Orange Pants" /></div>
        <div class="inventory-item tier-orange" data-code="gloves5"><img src="public/images/items/gloves1.png" alt="Orange Gloves" /></div>
        <div class="inventory-item tier-orange" data-code="boots5"><img src="public/images/items/boots1.png" alt="Orange Boots" /></div>
        <div class="inventory-item tier-orange" data-code="chest5"><img src="public/images/items/chest1.png" alt="Orange Chest" /></div>
        <div class="inventory-item tier-orange" data-code="helmet5"><img src="public/images/items/helmet1.png" alt="Orange Helmet" /></div>
        <div class="inventory-item tier-orange" data-code="tank"><img src="public/images/items/tank.png" alt="Orange Tank" /></div>
      </div>
    </div>
    <div id="stat-tooltip" class="stat-tooltip"></div>
    <script type="module" src="src/main.js"></script>

    <!-- MODAL PARA SELECCIÃ“N DE COMIDA -->
    <div id="food-selection-modal" class="modal-overlay hidden">
      <div class="modal-content">
        <h4>Select Consumable for Full Combat</h4>
        <p>Choose a food item to simulate how long you can last in combat.</p>
        <div id="modal-food-options" class="modal-food-grid">
          <!-- Las opciones de comida se cargarÃ¡n aquÃ­ dinÃ¡micamente -->
        </div>
        <div class="modal-actions">
          <button id="start-simulation-with-food-btn" class="action-btn" disabled>Simulate</button>
          <button id="cancel-simulation-btn" class="action-btn reset-btn">Cancel</button>
        </div>
      </div>
    </div>
    <!-- PLANTILLA PARA EXPORTAR IMAGEN (OCULTA POR DEFECTO) -->
    <div id="build-export-card">
      <div class="export-header">
        <div class="export-player-info">
          <h3>PLAYER BUILD</h3>
          <span id="export-level-badge"></span>
        </div>
      </div>
      <div class="export-main-content">
        <div class="export-column export-skills-column">
          <h4>Skills</h4>
          <ul id="export-skills-list">
            <!-- Los skills se llenarÃ¡n aquÃ­ -->
          </ul>
        </div>
        <div class="export-column export-stats-column">
          <h4>Character Stats</h4>
          <ul id="export-stats-list">
            <!-- Las stats se llenarÃ¡n aquÃ­ -->
          </ul>
          <h4>Equipment</h4>
          <div id="export-equipment-grid" class="export-equipment-grid">
            <!-- El equipo se llenarÃ¡ aquÃ­ -->
          </div>
        </div>
      </div>
      <div class="export-footer">
        <h4>Simulation Result</h4>
        <p id="export-simulation-summary">No simulation data.</p>
      </div>
    </div>
    <div id="generic-modal" class="modal-overlay hidden">
      <div class="modal-content">
        <h4 id="generic-modal-title">Confirmation</h4>
        <p id="generic-modal-text">Are you sure?</p>
        <div id="generic-modal-actions" class="modal-actions">
          <button id="generic-modal-confirm-btn" class="action-btn">Confirm</button>
          <button id="generic-modal-cancel-btn" class="action-btn reset-btn">Cancel</button>
        </div>
      </div>
    </div>
</div>
</body>
</html>